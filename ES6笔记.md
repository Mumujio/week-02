# ES6笔记
## let和const命令
### let命令
* 只在let命令所在的代码块内有效。

* for循环的计数器，就很合适使用let命令

* for循环还有一个特别之处，就是设置循环变量的那部分是一个父作用域，而循环体内部是一个单独的子作用域

* 不存在变量提升：var会发生变量提升，let和const不会（let声明的变量一定要在声明后使用)

* 暂时性死区：let声明的变量“绑定”在这个区域，不再受外部影响
   * 如果区块中存在let和const命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错(在let命令声明变量tmp之前，都属于变量tmp的“死区”)

* let不允许在相同作用域内，重复声明同一个变量。

* 块级作用域的作用：
   1. 防止内层变量覆盖外层变量
   2. 防止用来计数的变量泄露为全局变量
   3. 内层作用域可以定义外层作用域的同名变量

* 在块级作用域中应写成函数表达式

* 函数只能声明在当前作用域的顶层

### const命令
* 声明一个只读的常量，不可改变
* 一旦声明变量就必须初始化
* const作用域与let命令相同，有块级作用域
* 变量的值可变动，变量指向的内存地址保存的数据不可改变
* 对象冻结，应该使用Object.freeze方法

### 顶层对象
* 在浏览器环境指的是window对象，在 Node 指的是global对象（与全局变量等价）
* var命令和function命令声明的全局变量，是顶层对象的属性
* let命令、const命令、class命令声明的全局变量，不属于顶层对象的属性
* 函数里面的this，如果函数不是作为对象的方法运行，而是单纯作为函数运行，this会指向顶层对象。但是，严格模式下，这时this会返回undefined
* ES2020，引入globalThis作为顶层对象。即任何环境下，globalThis都是存在的

## 变量的解构赋值
### 数组的解构赋值
* 解构：从数组和对象中提取值，对变量进行赋值
* 如果解构不成功，变量的值就等于undefined。
* 只要某种数据结构具有 Iterator 接口，都可以采用数组形式的解构赋值
* 数组的解构也可以指定默认值
* 只有当一个数组成员严格等于（===）undefined，默认值才会生效

### 对象的解构赋值
* 而对象的属性没有次序，变量必须与属性同名，才能取到正确的值
* 可以将现有对象的方法，赋值到某个变量
* 对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量
* 对象的解构赋值可以取到继承的属性
* 对象的解构也可以指定默认值，默认值生效的条件是，对象的属性值严格等于undefined
* 如果将已经声明的变量用于解构赋值，必须要使用小括号
* 可以对数组进行对象属性的解构

### 字符串的解构赋值
* 字符串被转换成了一个类似数组的对象

### 数值和布尔值的解构赋值
* 只要等号右边的值不是对象或数组，就先将其转为对象

### 函数参数的解构赋值
* 函数参数的解构也可以使用默认值

* 可以使用圆括号的情况只有一种：赋值语句的非模式部分，可以使用圆括号。

### 变量的解构赋值的用途
1. 交换变量的值
2. 从函数返回多个值
3. 解构赋值可以方便地将一组参数与变量名对应起来。
4. 提取 JSON 数据
5. 可指定参数的默认值
6. 遍历Map结构
7. 输入模块的指定方法
## 字符串和正则表达式
### UTF-16码位
* 字符的数值或码位称之为字符编码

### codePointAt()方法
* 接受：编码单元的位置
* 返回：字符串给定位置对应的码位（整数）
* 作用：检测一个字符占用的编码单元数量

### String.fromCodePoint()方法
* 接受：码位
* 返回：指定码位对应的一个字符
* 作用：码位转换为字符

### normalize()方法
* 接受：一个可选的字符串参数
* 作用：开发国际化应用

### 正则表达式
* 定义：正则表达式是由一个字符序列形成的搜索模式
* 语法：/正则表达式主体/修饰符(可选)     
![](D:\Geek\photo\1.png)

* 作用：
   * search()方法：检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置
   * replace()方法：在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串
   * test()方法：检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文本，则返回 true，否则返回 false。
   * exec()方法：检索字符串中的正则表达式的匹配，返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null

### 正则表达式u修饰符
* 作用：
   1. 从编码单元操作模式切换为字符模式
   2. 计算码位数量
   3. 检测u修饰符支持

### 其他字符串的变更
#### 字符串中的字串识别
* includes()方法：在字符串中检测到指定文本返回true,否则false
* starsWith()方法：在字符串起始部分检测到指定文本返回true,否则false
* endsWith()方法：在字符串结束部分检测到指定文本返回true,否则false
* repeat()方法：字符串重复一定次数

### 其他正则表达式语法变更
#### 正则表达式y修饰符（粘性匹配）
1. 定义：通知搜索从正则表达式的lastIndex属性开始
2. 与g修饰符
* 相同点：与g修饰符一样，保存lastIndex属性（记录匹配字符串最后的位置）的值
* 不同点：g修饰符全局匹配，lastIndex位置往后继续匹配，y修饰符开始遇到不匹配立即停止匹配
3. 只有调用exec()和test()方法才会涉及lastIndex属性，math()不会触发
4. 如果sticky属性的值为true为支持y修饰符，否则为false。只可读属性。

#### 正则表达式的复制
* 可以通过给RegExp构造函数传递正则表达式作为参数来复制这个正则表达式
var re1 = /ab/i,
      re2 = new RegExg(re1);
* 可以为正则表达式指定一个修饰符（ES6)
var re1 = /ab/i,
      re2 = new RegExp(re1,"g");

#### flags属性和source属性
* flags属性：会返回所有应用于当前正则表达式的修饰符字符串
* source属性：获取正则表达式的文本
* 注意：以上两个属性均为只读

#### 模板字面量
* 意义：
   1. 一个正式的多行字符串的概念
   2. 将变量嵌入字符串的能力
   3. 向HTML插入经过安全转换后的字符串的能力
* 基础语法：使用 ` 代替 " 。字符串中再想使用 ` 的话，加上\转义，"和'则不需要转义。
* 作用：
   1. 简化多行字符串：可直接回车换行（反撇号中，空白符也属于字符串的一部分）
   2. `字符串占位符`：
      * 组成：${   }   中间可包含任意表达式（已定义）
      * 功能：可以把任何表达式嵌入到占位符中作为字符串的一部分
      * 注意：模板字面量可嵌套
   3. 标签模板：
      * 定义：在第一个反撇号前标注字符串

































